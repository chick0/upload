{% extends 'layout.html' %}
{% block content %}
    <section class="section">
        <h1 class="title">파일 업로드</h1>
        <h2 class="subtitle">업로드한 파일은 45분뒤에 삭제됩니다.</h2>
    </section>

    <section class="section">
        <form method="post" enctype="multipart/form-data">
            <div class="field is-grouped">
                <div class="control">
                    <div class="file is-large">
                        <label class="file-label">
                            <input class="file-input" type="file" name="file" id="fileInput" required="required">
                            <span class="file-cta" id="fileLabel">선택된 파일 없음</span>
                        </label>
                    </div>
                </div>
                <div class="control">
                    <button type="submit" class="button is-link is-large">업로드</button>
                </div>
            </div>
        </form>
    </section>

    <section class="section">
        <div class="content">
            <p>{{ max }}개의 파일 중 {{ count }}개가 업로드되어 있습니다.</p>
        </div>
    </section>
{% endblock %}
{% block script %}
    <script>
        const fileInput = document.getElementById("fileInput");
        fileInput.onchange = function(){
            if (fileInput.files.length == 1) {
                if(fileInput.files[0].size >= {{ max_size }}) {
                    window.alert("업로드 하려는 파일의 크기가 너무 큽니다."); fileInput.value="";
                } else {
                    document.getElementById("fileLabel").innerText = "파일 선택 완료!";
                }
            } else {
                document.getElementById("fileLabel").innerText = "선택된 파일 없음";
            }
        }
    </script>
{% endblock %}