{% extends 'layout.html' %}
{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title is-1">내 파일</h1>
    {% if files|length == 0 %}
        <div class="notification is-danger">
            업로드한 파일이 없습니다!
        </div>
    {% endif %}
    </div>
</section>

<section class="section">
    <div class="container">
    {% for file in files %}
        <div class="box" data-url="/file/{{ file_id_storage[file.code] }}">
            <h4 class="title is-4">{{ file.name }}</h4>
            <p class="subtitle">{{ file.creation_date|parse_timestamp|safe }}</p>
        </div>
    {% endfor %}
    </div>
</section>
{% endblock %}

{% block script %}
<script>
    document.querySelectorAll("div.box").forEach((element) => {
	    element.addEventListener('click', () => {
            location.href = element.dataset.url;
	    });
    });
</script>
{% endblock %}